on: push
jobs:
  tests:
    name: Unit-Tests
    runs-on: macos-11
    steps:
        - name: Checkout repository
          uses: actions/checkout@v2
        - name: Run unit tests
          run: swift test --enable-code-coverage
        - name: Upload coverage to Codecov
          uses: codecov/codecov-action@v2
          with:
            token: ${{ secrets.CODECOV_TOKEN }}
            file: ./.build/debug/codecov/Chess.json
            fail_ci_if_error: true